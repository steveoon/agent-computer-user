# 招聘业务运营指标说明手册 (Operational Metrics Guide)

本文档旨在为业务运营团队解释招聘自动化系统中的各项统计指标。这些指标反映了招聘漏斗的各个环节，帮助我们评估账号流量、互动质量以及最终的转化效果。

---

## 1. 流量与负载指标 (Traffic & Load)

这些指标反映了每日的“进水口”大小，即有多少候选人主动找我们，以及我们主动找了多少人。

### 📅 入站消息总数 (Total Flow / Messages Received)

- **定义**：通过**未读检测工具**（`get_unread_messages`）识别到的入站消息总数。
- **计算方式**：`∑ (unread_count_before_reply)` WHERE 事件类型 = `MESSAGE_RECEIVED`
- **业务含义**：反映了**被系统主动检测到的市场热度**和**客服工作负载**。
- **注意**：
  > 这是一个"消息量"计数，不是"人数"计数。如果一个候选人连发3条消息，这里会计入 3。
  > ⚠️ **重要**：此指标仅统计通过未读检测流程发现的消息。如果 Agent 直接打开聊天界面回复（未经过未读检测），这些消息不会计入此指标。

### 👥 入站候选人数 (Inbound Candidates)

- **定义**：全天主动给我们发消息的去重候选人数。
- **计算方式**：`COUNT(DISTINCT candidate_key)` WHERE 满足以下任一条件：
  1. 事件类型 = `MESSAGE_RECEIVED`（通过未读检测发现）
  2. 事件类型 = `MESSAGE_SENT` 且 `was_unread_before_reply = true`（Agent 直接回复未读消息）
- **业务含义**：反映了**有效咨询量**。
- **场景**：如果"入站消息总数"很高但"入站候选人数"很低，说明现有候选人问题很多，咨询很频繁，而不是新客多。

### 📢 主动触达数 (Proactive Outreach)

- **定义**：我们（AI/人工）通过“打招呼”功能主动联系的候选人数量。
- **业务含义**：反映了**主动拓客的力度**。这是我们扩充流量池的主要手段。

---

## 2. 响应与互动质量 (Engagement & Quality)

这些指标评估我们（AI或人工客服）对候选人的承接能力，以及候选人对我们主动出击的反馈。

### ↩️ 回复率 (Reply Rate)

- **定义**：在所有主动找我们的候选人中，我们回复了多少人。
  - **公式**：`被回复的候选人数 (Replied Candidates) / 入站候选人数 (Inbound Candidates)`
- **辅助指标**：**被回复候选人数 (Replied Candidates)**
  > 即上述公式的分子。当回复率异常时，可查看此绝对值以确认是“没人回复”还是“分母太大”。
- **业务含义**：**漏斗承接能力**的核心指标。
- **解读**：
  - ✅ 理想情况下应接近 100%。
  - ❌ 如果过低，说明有大量候选人被遗漏（Leakage），或者被系统判定为不匹配直接忽略。

### ⚡️ 未读秒回覆盖量 (Unread Instant Reply Coverage)

- **定义**：Agent 回复未读消息时，所**消化**的未读消息总数。
- **计算方式**：`∑ (unread_count_before_reply)` WHERE 事件类型 = `MESSAGE_SENT` 且 `was_unread_before_reply = true`
- **注意**：
  > 这不是"回复次数"，而是"消化的消息量"。
  > 如果候选人连发 3 条消息，Agent 回复了一条（一次性处理了这 3 条），这里会计为 **3**。
  > 对应的，如果是 `was_unread_before_reply = false`（非立即/已读后回复），通常未读计数为 0，不计入此指标。
- **业务含义**：反映了系统的**实时吞吐能力**。数值越高，说明 Agent 在"秒回"的同时处理了越多的积压消息。
- **⚠️ 与"入站消息总数"的关系**：
  > 此指标可能**大于**"入站消息总数"，这是正常现象。详见 [FAQ: 为什么"未读秒回覆盖量"大于"入站消息总数"？](#q-为什么未读秒回覆盖量大于入站消息总数)

### 🎯 主动触达回复率 (Proactive Response Rate)

- **定义**：我们主动打招呼后，候选人回消息的比例。
  - 公式：`主动触达后回复的人数 / 主动触达总人数`
- **业务含义**：衡量**打招呼话术**和**候选人筛选策略**的有效性。
- **解读**：如果此指标过低，说明我们选的人不对，或者打招呼的话术没有吸引力。

---

## 3. 转化成果指标 (Conversion Outcomes)

这些是招聘漏斗的“结果”，直接关系到最终招聘效果。

### 🟢 微信获取数 (WeChat Obtained)

- **定义**：成功获取到候选人微信号的人数。
- **判定标准**：
  1. 系统成功执行了“交换微信”动作且对方同意；
  2. 或者在聊天记录中识别到了明确的微信交换卡片/文本。
- **业务含义**：**私域沉淀**的关键指标。

### 📈 微信转化率 (WeChat Conversion Rate)

- **定义**：在所有入站咨询的候选人中，最终拿到微信的比例。
  - **公式**：`微信获取数 / 入站候选人数`
- **业务含义**：**全流程转化率**。它衡量的是**流量利用效率**，受回复率和话术质量双重影响。
  > 如果因为漏回导致此指标低，说明流量被浪费了。

### 💬 [规划中] 沟通转化率 (Chat-to-WeChat Rate)

- **定义**：在**已建立对话**（即已回复）的候选人中，成功拿到微信的比例。
  - **公式**：`微信获取数 / 被回复候选人数`
- **业务含义**：衡量 **AI/客服的话术能力**。
- **价值**：剔除了“漏回/未回”的干扰，单纯反映“聊得好不好”。未来将作为评估话术 A/B 测试效果的核心指标。

### 🗓 面试预约数 (Interviews Booked)

- **定义**：成功通过系统工具预约面试的候选人数。
- **业务含义**：招聘流程进入**深水区**的标志，是比获取微信更高阶的转化目标。

---

## 4. 数据分析维度 (Analysis Dimensions)

我们的统计系统支持灵活的多维度数据分析，可以从不同视角洞察业务表现。

### 🤖 按账号维度 (By Agent)

- **场景**：评估单个客服/AI 机器人的工作表现。
- **示例**：对比 "Boss直聘-上海1号" 和 "Boss直聘-深圳2号" 的回复率和转化率差异。
- **数据标识**：`agent_id`（如 `zhipin-001`）
- **应用**：KPI 考核、账号健康度监控。

### 🏷️ 按品牌维度 (By Brand)

- **场景**：评估不同品牌的招聘难度和市场吸引力。
- **示例**：对比 "肯德基" 和 "必胜客" 的入站流量和面试转化率。
- **数据标识**：`brand_id`（如 `1` 代表肯德基，`36` 代表必胜客）
- **应用**：品牌投放策略调整、预算分配。

### 📋 按岗位维度 (By Job)

- **场景**：分析具体职位的市场供需情况。
- **示例**：对比 "服务员" 和 "店长" 的招募难度。
- **数据标识**：`job_id` / `job_name`
- **应用**：职位描述（JD）优化、薪资竞争力分析。
- **⚠️ 数据局限说明**：
  > 目前仅在 **面试预约** 环节能精确获取 `job_id`。
  > 在聊天和打招呼阶段，`job_id` 往往缺失（为 0）。
  > **注意**：统计报表是按 `job_id` 聚合的。当 `job_id=0` 时，即使原始记录中有不同的 `job_name`（如“服务员”、“厨师”），它们也会被**合并统计**到同一个“未知岗位”类别中，无法拆分。因此，目前的岗位维度分析主要适用于面试转化环节。

### ⏱️ 按时间维度 (By Date/Week/Month)

- **场景**：观察流量趋势和周期性规律。
- **示例**：
  - **日粒度**：监控昨日流量是否异常（如骤降）。
  - **周/月粒度**：分析月度招聘目标的达成进度。
- **数据基础**：底层数据按“日”存储，但支持向上聚合为周、月、季、年报表。
- **应用**：排班优化、活动节点规划、年度总结。

> **💡 组合分析能力**：
> 系统支持维度的**任意组合**。例如，你可以查询："肯德基"（品牌）在 "深圳"（区域/账号）的 "服务员"（岗位）在上个月的数据表现。

---

## 5. 指标计算公式速查表 (Metric Formulas Cheat Sheet)

为了方便快速查阅，我们将关键业务指标的计算公式汇总如下：

| 指标名称           | 英文标识                  | 计算公式 / 来源                                        | 备注                     |
| :----------------- | :------------------------ | :----------------------------------------------------- | :----------------------- |
| **入站消息总数**   | `Messages Received`       | `∑ (unread_count)` WHERE 事件=`MESSAGE_RECEIVED`       | 通过未读检测发现的消息量 |
| **入站候选人数**   | `Inbound Candidates`      | `Count(Distinct 候选人)` WHERE 事件=`MESSAGE_RECEIVED` 或 (`MESSAGE_SENT` 且 `was_unread=true`) | 主动找我们的人数（去重） |
| **未读秒回覆盖量** | `Unread Replied`          | `∑ (unread_count)` WHERE 事件=`MESSAGE_SENT` 且 `was_unread=true` | 回复时消化的未读消息量，可能 > 入站消息总数 |
| **回复率**         | `Reply Rate`              | `(被回复的候选人数 / 入站候选人数) × 100%`             | 衡量承接能力             |
| **微信转化率**     | `WeChat Conversion Rate`  | `(微信获取数 / 入站候选人数) × 100%`                   | 衡量私域沉淀能力         |
| **主动触达回复率** | `Proactive Response Rate` | `(主动触达后回复人数 / 主动触达总人数) × 100%`         | 衡量打招呼效果           |
| **面试转化率**     | `Interview Rate`          | `(面试预约数 / 入站候选人数) × 100%`                   | 衡量最终转化效果         |

---

## 6. 数据示例解读

参考以下实际数据样本（来自 `recruitment_daily_stats`）：

### 📊 案例 A：高流量低转化 (需要警惕)

```json
{
  "messages_received": 18, // ⚠️ 收到18次消息（很热闹）
  "inbound_candidates": 8, // 实际只有8个人咨询
  "candidates_replied": 2, // ❌ 只回复了2个人
  "reply_rate": 2500, // ❌ 回复率 25.00% (极低)
  "wechat_exchanged": 0 // ❌ 0个微信交换
}
```

**🔍 诊断**：
客服/AI 漏掉了大量咨询（8个人只回了2个），导致回复率极低，自然没有转化。
👉 **建议**：检查是否开启了自动回复，或筛选条件是否配置过严。

### 🌟 案例 B：高转化 (理想模型)

```json
{
  "messages_received": 4,
  "inbound_candidates": 2,
  "candidates_replied": 2,
  "reply_rate": 10000, // ✅ 回复率 100.00%
  "wechat_exchanged": 2, // ✅ 2个人都换了微信
  "wechat_rate": 10000 // ✅ 微信转化率 100.00%
}
```

**🔍 诊断**：
虽然流量小（只有2人），但承接完美，每个都回复且都拿到了微信。这是理想的服务质量模型。

---

## 7. 常见问题 (FAQ)

<details>
<summary><strong>Q: 为什么“消息总数”不等于“候选人数”？</strong></summary>

**A:** 因为同一个候选人可能会发多条消息。
例如：张三发了“你好”、“还在招吗”、“我是应届生”三条消息：

- 消息总数记为 **3**（反映处理工作量）
- 候选人数记为 **1**（反映客源数量）
</details>

<details>
<summary><strong>Q: 跨账号重复怎么算？</strong></summary>

**A:** 目前系统基于**候选人姓名**进行去重。
如果同一个候选人（同名）在同一天咨询了我们运营的两个不同账号，在汇总报表中会被视为“跨账号重复”。我们有一个指标叫 `Repeat Rate` 来监测这种情况，帮助优化账号矩阵的投放策略。

</details>

<details>
<summary><strong>Q: 回复率为什么不是 100%？</strong></summary>

**A:** 通常有以下几种可能：

1. 🗑️ 候选人发的是广告或骚扰信息，被判定无需回复。
2. 🚫 候选人条件经系统初筛严重不符（如学历、经验），配置了不回复策略。
3. ⚠️ 系统故障或漏处理。

**注意**：运营同学应关注回复率骤降的情况，这通常意味着系统或策略出现了问题。

</details>

<details>
<summary><strong>Q: 为什么"未读秒回覆盖量"大于"入站消息总数"？</strong></summary>

**A:** 这是正常现象，原因是两个指标的**数据来源不同**：

| 指标 | 数据来源 | 触发条件 |
|------|----------|----------|
| 入站消息总数 | `MESSAGE_RECEIVED` 事件 | Agent 调用 `get_unread_messages` 工具检测未读 |
| 未读秒回覆盖量 | `MESSAGE_SENT` 事件 | Agent 回复时 `was_unread_before_reply = true` |

**常见场景**：

1. **Agent 直接回复**：Agent 没有先调用未读检测工具，而是直接打开聊天界面回复候选人。这种情况下：
   - ❌ 不会产生 `MESSAGE_RECEIVED` 事件（不计入"入站消息总数"）
   - ✅ 会产生带 `was_unread_before_reply=true` 的 `MESSAGE_SENT` 事件（计入"未读秒回覆盖量"）

2. **同一候选人多次回复**：如果 Agent 对同一个候选人回复了多次，每次回复都会累加到"未读秒回覆盖量"。

**示例**：
- 候选人 A 发了 2 条消息，通过未读检测发现 → 入站消息 +2
- 候选人 B 发了 3 条消息，Agent 直接回复 → 入站消息 +0，秒回覆盖 +3
- 结果：入站消息总数 = 2，未读秒回覆盖量 = 5

**建议**：如果希望两个指标保持一致，应确保 Agent 在回复前始终先调用 `get_unread_messages` 工具进行未读检测。

</details>
